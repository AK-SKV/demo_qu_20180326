<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="notification_tree_view" model="ir.ui.view">
            <field name="name">notification_tree_view</field>
            <field name="model">alarm.notification</field>
            <field name="arch" type="xml">
                <tree create="false" decoration-info="state=='open' and active_from&gt;current_date" decoration-success="state=='closed'" decoration-danger="state=='cancelled'">
                    <field name="active_from"/>
                    <field name="name"/>
                    <field name="record"/>
                    <field name="model_id"/>
                    <field name="user_id" groups="alarm.group_alarm_manager"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>

        <record id="notification_form_view" model="ir.ui.view">
            <field name="name">notification_form_view</field>
            <field name="model">alarm.notification</field>
            <field name="arch" type="xml">
                <form create="false">
                    <header>
                        <field name="state" widget="statusbar" clickable="True"/>
                    </header>
                    <sheet>
                        <div class="oe_title">
                            <h1><field name="name"/></h1>
                            <label for="user_id" string="Generated for"/>
                            <field name="user_id" readonly="True"/>
                        </div>

                        <group col="4">
                            <field name="record" colspan="4"/>
                            <field name="active_from" colspan="4"/>

                        </group>

                        <notebook>
                            <page name="notification_message_page" string="Notification Message">
                                <field name="notification_message" widget="html" colspan="4" nolabel="1"/>
                            </page>
                            <page name="notes_page" string="Notes">
                                <field name="notes" widget="html" colspan="4" nolabel="1"/>
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="notification_search_view" model="ir.ui.view">
            <field name="name">notification_search_view</field>
            <field name="model">alarm.notification</field>
            <field name="arch" type="xml">
                <search>
                    <field name="name"/>
                    <field name="model_id"/>
                    <field name="active_from"/>
                    <field name="user_id"/>
                    <separator/>

                    <filter name="filter_my" string="My Notifications" domain="[('user_id', '=', uid)]"/>
                    <separator/>

                    <filter name="filter_active" string="Active" domain="[('active_from', '&lt;=', context_today().strftime('%%Y-%%m-%%d'))]"/>
                    <filter name="filter_future" string="Future" domain="[('active_from', '&gt;', context_today().strftime('%%Y-%%m-%%d'))]"/>
                    <separator/>

                    <filter name="filter_open" string="Open" domain="[('state', '=', 'open')]"/>
                    <filter name="filter_closed" string="Closed" domain="[('state', '=', 'closed')]"/>
                    <filter name="filter_cancelled" string="Cancelled" domain="[('state', '=', 'cancelled')]"/>
                    <separator/>

                    <filter name="group_name" string="Name" context="{'group_by': 'name'}"/>
                    <filter name="group_model_id" string="Model" context="{'group_by': 'model_id'}"/>
                    <filter name="group_state" string="State" context="{'group_by': 'state'}"/>
                </search>
            </field>
        </record>

        <record id="show_alarm_notifications_tree_action" model="ir.actions.act_window">
            <field name="name">Alarm Notifications</field>
            <field name="res_model">alarm.notification</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{'search_default_filter_my': 1, 'search_default_filter_active': 1, 'search_default_filter_open': 1}</field>
        </record>
    </data>
</odoo>
