<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <template id="assets_frontend" inherit_id="website.assets_frontend" name="Timesheet activities">
      <xpath expr="." position="inside">

          <link rel="stylesheet" href="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/css/bootstrap-datepicker.css"/>
          <link rel="stylesheet" href="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/css/bootstrap-datepicker3.css"/>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/js/bootstrap-datepicker.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.ar.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.az.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.bg.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.bs.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.ca.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.cs.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.cy.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.da.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.de.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.el.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.en-AU.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.en-GB.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.eo.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.es.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.et.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.eu.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.fa.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.fi.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.fo.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.fr.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.fr-CH.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.gl.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.he.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.hr.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.hu.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.hy.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.id.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.is.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.it.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.it-CH.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.ja.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.ka.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.kh.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.kk.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.ko.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.kr.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.lt.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.lv.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.me.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.mk.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.mn.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.ms.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.nb.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.nl.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.nl-BE.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.no.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.pl.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.pt.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.pt-BR.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.ro.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.rs.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.rs-latin.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.ru.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.sk.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.sl.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.sq.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.sr.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.sr-latin.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.sv.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.sw.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.th.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.tr.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.uk.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.vi.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.zh-CN.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/lib/bootstrap-datepicker-1.6.4-dist/locales/bootstrap-datepicker.zh-TW.min.js"></script>
          <script type="text/javascript" src="/timesheet_activities_portal_users/static/src/js/timesheet_activities_portal_users.js"></script>
      </xpath>
    </template>

    <template id="portal_layout" name="Portal layout: timesheet activities menu entry"
              inherit_id="website_portal.portal_layout" priority="30">
        <xpath expr="//ul[contains(@class,'o_portal_submenu')]" position="inside">
            <li t-att-class="page_name == 'timesheet_activities' and 'active' or ''">
                 <a href="/my/timesheet_activities">Timesheet activities</a>
            </li>
        </xpath>
    </template>

    <template id="portal_my_home" name="Portal My Home: timesheet activities"
              inherit_id="website_portal.portal_my_home" priority="30">
        <xpath expr="//div[contains(@class,'o_my_home_content')]" position="inside">
            <h3 class="page-header">
                <a href="/my/timesheet_activities">Timesheet activities</a>
            </h3>
        </xpath>
    </template>

    <template id="my_timesheet_activities" name="My Timesheet activities">
        <t t-call="website_portal.portal_layout">
            <div class="o_tapu-box">
                <div class="o_tapu-box-header">
                    <h3 class="page-header">
                        Timesheet activities
                        <div class="tapu-sort-buttons-group pull-right">
                            <div class="btn-group" style="display: inline-block">
                                <button id="date_filters" type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <span t-esc="date_filters.get(date, {}).get('label', date_filters.get('all', {}).get('label', translate_func('All')))" />
                                    <span class="caret"></span>
                                </button>
                                <ul class="dropdown-menu" aria-labelledby="date_filters">
                                    <li t-foreach="date_filters" t-as="option" t-att-class="timesheet == option and 'active'">
                                        <a t-attf-href="/my/timesheet_activities?{{ keep_query('sortby', date=option) }}">
                                            <span t-esc="date_filters.get(option).get('label')" />
                                        </a>
                                    </li>
                                </ul>
                            </div>
                            <div class="btn-group" style="display: inline-block">
                                <button id="sortby" type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <span t-esc="sortings.get(sortby, {}).get('label', sortings.get('date', {}).get('label', translate_func('Newest')))" />
                                    <span class="fa fa-sort"></span>
                                </button>
                                <ul class="dropdown-menu" aria-labelledby="sortby">
                                    <li t-foreach="sortings" t-as="option" t-attf-class="#{sortby == option and 'active'}">
                                        <a t-att-href="default_url + '?' + keep_query('date', sortby=option)">
                                            <span t-esc="sortings.get(option).get('label')" />
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </h3>
                </div>
                <div class="o_tapu-box-content">
                    <form id="delete_form" action="/my/timesheet_activity/delete" method="post">
                        <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                        <div class="o_tapu-buttons-group">
                            <a id="o_tapu-create_activity" t-attf-href="/my/timesheet_activity/create" class="btn btn-default btn-primary">Create</a>
                            <button id="o_tapu-delete_activity" type="submit" class="btn btn-default btn-danger o_hidden">Delete</button>
                        </div>
                        <div class="panel panel-default o_timesheet_activities_portal_users_list_view mt16">
                            <t t-if="not timesheet_activities">
                                <div class="alert alert-warning mt8" role="alert">
                                    There are no timesheet activities.
                                </div>
                            </t>
                            <table t-if="timesheet_activities" class="table table-hover status_table">
                                <thead>
                                    <tr class="active">
                                        <th id="select_all_header" class="col-md-1 o_list_record_selector">
                                            <div class="o_checkbox">
                                                <input type="checkbox" name="select_all" /><span/>
                                            </div>
                                        </th>
                                        <th id="date_header" class="col-md-2">Date</th>
                                        <th id="name_header" class="col-md-2">Name</th>
                                        <th id="project_header" class="col-md-2">Project</th>
                                        <th id="task_header" class="col-md-3">Task</th>
                                        <th id="duration_header" class="col-md-2">Duration</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr t-foreach="timesheet_activities" t-as="timesheet_activity">
                                        <td class="o_list_record_selector">
                                            <div class="o_checkbox">
                                                <input type="checkbox" t-att-name="timesheet_activity.id" t-att-checked="checked"/><span/>
                                            </div>
                                        </td>
                                        <td>
                                            <a t-attf-href="/my/timesheet_activity/#{timesheet_activity.id}?{{ keep_query() }}">
                                                <span><t t-esc="convert_date(timesheet_activity.date)"/></span>
                                            </a>
                                        </td>
                                        <td>
                                            <a t-attf-href="/my/timesheet_activity/#{timesheet_activity.id}?{{ keep_query() }}">
                                                <span t-field="timesheet_activity.name"/>
                                            </a>
                                        </td>
                                        <td>
                                            <a t-attf-href="/my/project/#{timesheet_activity.project_id.id}?{{ keep_query() }}">
                                                <span t-field="timesheet_activity.project_id.name"/>
                                            </a>
                                        </td>
                                        <td>
                                            <a t-attf-href="/my/task/#{timesheet_activity.task_id.id}?{{ keep_query() }}">
                                                <span t-field="timesheet_activity.task_id.name"/>
                                            </a>
                                        </td>
                                        <td>
                                            <a t-attf-href="/my/timesheet_activity/#{timesheet_activity.id}?{{ keep_query() }}">
                                                <span t-field="timesheet_activity.unit_amount"
                                                      t-field-options='{"widget": "duration", "unit": "hour", "round": "minute"}'/>
                                            </a>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </form>
                    <div t-if="pager" class="o_portal_pager text-center">
                        <t t-call="website.pager"/>
                    </div>
                </div>
            </div>
        </t>
    </template>

    <template id="my_timesheet_activity" name="My Timesheet activity">
        <t t-call="website.layout">
            <div id="wrap">
                <div class="container">
                    <div class="oe_structure">
                        <div class="row">
                            <div class="col-sm-4">
                                <ol class="breadcrumb mt8">
                                    <li><a href="/my/home"><i class="fa fa-home"/></a></li>
                                    <li><a t-attf-href="/my/timesheet_activities?#{keep_query()}">My Timesheet activities</a></li>
                                    <li t-if="timesheet_activity"><span t-field="timesheet_activity.name"/></li>
                                </ol>
                            </div>
                        </div>
                    </div>
                    <h1 t-if="not timesheet_activity">
                        New Timesheet Activity
                    </h1>
                    <form action="/my/timesheet_activity/update" method="post">
                        <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                        <div class="row o_timesheet_activities_portal_users">
                            <div class="col-md-8">
                                <div class="row">
                                    <div class="col-md-12">
                                      <div t-if="error_message" class="alert alert-danger">
                                          <t t-foreach="error_message" t-as="err"><t t-esc="err"/><br /></t>
                                      </div>
                                    </div>
                                    <div t-attf-class="form-group #{error.get('project_id') and 'has-error' or ''} col-lg-6">
                                        <label class="control-label" for="project_id">Project</label>
                                        <select name="project_id" class="form-control">
                                            <option value="">Project...</option>
                                            <t t-foreach="projects or []" t-as="project">
                                                <option t-att-value="project.id"
                                                        t-att-selected="project.id == (project_id or (timesheet_activity and timesheet_activity.project_id.id))">
                                                    <t t-esc="project.name" />
                                                </option>
                                            </t>
                                        </select>
                                    </div>
                                    <div t-attf-class="form-group #{error.get('task_id') and 'has-error' or ''} col-lg-6">
                                        <label class="control-label label-optional" for="task_id">Task</label>
                                        <select name="task_id" class="form-control">
                                            <option value="">Task...</option>
                                            <t t-foreach="tasks or []" t-as="task">
                                                <option t-att-value="task.id" style="display:none;"
                                                        t-att-data-project_id="task.project_id.id"
                                                        t-att-selected="task.id == (task_id or (timesheet_activity and timesheet_activity.task_id.id))">
                                                    <t t-esc="task.name" />
                                                </option>
                                            </t>
                                        </select>
                                    </div>
                                    <div t-attf-class="form-group #{error.get('unit_amount') and 'has-error' or ''} col-lg-6">
                                        <label class="control-label" for="date">Quantity (hours)</label>
                                        <input type="text" name="unit_amount" class="form-control"
                                               t-att-value="(unit_amount if unit_amount != None else (timesheet_activity and timesheet_activity.unit_amount))" />
                                    </div>
                                    <div id="delivery_date" t-attf-class="form-group #{error.get('date') and 'has-error' or ''} col-lg-6">
                                        <div>
                                            <label class="control-label" for="date">Date</label>
                                            <div id="datepicker-container-delivery">

                                                <div id="datepicker" t-attf-class="input-group date datepicker col-lg-6">
                                                    <input id="x1" name="date" data-depends="true" t-att-value="date if date != None else (timesheet_activity and timesheet_activity.date)" type="text" maxlength="10" class="form-control"/>
                                                    <span id="myid" class="input-group-addon">
                                                        <i class="fa fa-calendar" />
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div t-attf-class="form-group #{error.get('name') and 'has-error' or ''} col-lg-6">
                                        <label class="control-label" for="name">Description</label>
                                        <input type="text" name="name" class="form-control"
                                               t-att-value="(name if name != None else (timesheet_activity and timesheet_activity.name))" />
                                    </div>
                                    <input type="hidden" name="timesheet_activity_id" t-att-value="timesheet_activity and timesheet_activity.id"/>
                                </div>
                                <div class="clearfix">
                                    <input type="checkbox" id="to_delete_checkbox" name="to_delete" style="opacity:0; position:absolute;" />
                                    <button t-if="timesheet_activity" id="delete_timesheet_id" type="submit" class="btn btn-danger mb32">
                                        <span class="fa fa-trash-o" /> Delete
                                    </button>
                                    <button type="submit" id="to_confirm_checkbox" class="btn btn-default btn-primary pull-right mb32 ">
                                        Confirm
                                        <span class="fa fa-long-arrow-right" />
                                    </button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </t>
    </template>

</odoo>
